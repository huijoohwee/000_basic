# 内容精炼概括规范

**实施提示**：精炼不是简单删除，而是信息重构。保持技术准确性同时提升信息密度，通过锚点系统维持完整知识链。

## 0 项目背景

精益初创、敏捷开发、最小可行产品（MVP）上线、模块化可扩展、单一职责原则（SRP）、MECE 原则、人机解析/性价比/tokens预算/新手上手友好

## 1 LLM 执行指令

**精炼处理要求**：

1. 严格遵循指定token限制（由上下文规范表格确定）
2. 保持技术准确性，通过信息重构提升信息密度
3. 使用锚点系统维持完整知识链，将详细技术细节迁移至锚点
4. 按照语义化转换规范进行内容重构（箭头符号/状态符号/参数标记等）
5. 当内容超触发阈值时自动应用精炼规则（拆分/列表化/简化）

## 2 目标定位

- **原始文档**：技术细节密集+完整代码示例
- **目标文档**：
  - 业务语义优先+接口化描述
  - 实施脉络：从小白到大师
  - 产品：从0到1、从构思到上线到持续迭代更新、从MVP到变现到IPO
  - 价值实现：从外层用户旅程到内层运维操作
  - 风格：精炼、结果导向、数据驱动、CTO视角，避免形容词堆砌
  - 语言：中文，必要时中英双语术语并列
  - 后续扩展：复杂事项需预提方案并确认执行，用户会另下执行指令
  - 投喂给任何主流 LLM，即可一键优化完善生成执行方案

# 3 文档内容与 Token 范围规范

| 内容类型                   | 语义角色     | 建议 Token 范围 | 精炼触发阈值 | 处理要求           | 处理前示例                                                               | 处理后示例                                                |
| -------------------------- | ------------ | --------------- | ------------ | ------------------ | ------------------------------------------------------------------------ | --------------------------------------------------------- |
| **H1 (`#`)**<br>文档标题   | 全局标识     | 10-30           | >30          | 缩短至核心名词短语 | 《内容精炼概括规范详细实施指南》                                         | 《内容精炼规范》                                          |
| **H2 (`##`)**<br>一级章节  | 核心知识单元 | 500-1,500       | >1,500       | 拆分为子章节       | "2. 标题转换规则及实施方法"                                              | "2. 标题转换"                                             |
| **H3 (`###`)**<br>二级章节 | 子知识单元   | 200-500         | >500         | 转为要点列表       | "2.1 中文序号转阿拉伯数字的完整规则"                                     | "2.1 序号转换：一→1"                                      |
| **内容段落**<br>(H2/H3下)  | 概念说明     | 50-150          | >150         | 精炼为≤3要点       | "精炼核心原则要求保留关键信息，删除冗余细节，确保内容密度提升50%以上..." | "- ✅ 保留关键信息<br>- ⚠️ 删除冗余细节<br>- 🚧 提升密度50%" |
| **技术要点**<br>(列表项)   | 具体操作点   | 20-50           | >50          | 添加状态符号       | "小批量提交策略：每完成一个小功能就提交，避免积累大量更改"               | "✅ 小批量提交：完成即提交"                                |
| **代码注释**<br>(代码块内) | 命令说明     | 5-15            | >15          | 简化表述           | "# 创建功能分支并切换到新分支"                                           | "# 创建功能分支"                                          |
| **代码块**                 | 可执行单元   | 按行数计算      | >10行        | 保留核心命令≤3行   | 19行脚本（完整实现）                                                     | "start-feature <name> → 创建分支"                         |
| **表格**                   | 结构化数据   | 按单元格计算    | >15单元格    | 简化行列结构       | 20单元格对比表                                                           | 5单元格核心参数表                                         |
| **流程图**                 | 过程可视化   | 按元素计算      | >10元素      | 转为文字描述       | 15元素mermaid图                                                          | "流程：输入→处理→输出"                                    |

**复合文档规则**：当H2章节包含≥3个H3子章节时，整体Token上限扩展至2000
**平衡原则**：技术文档信息密度应保持在 0.8-1.2 tokens/字，视觉密度每屏（约2000 tokens）含 3-5 个信息单元

## 4 处理示例详解

### 代码块精炼

**处理前** (12行)：

```bash
git checkout develop
git pull origin develop
git checkout -b feature/$2
echo "功能分支 feature/$2 已创建"
```

**处理后** (1行)：

```bash
start-feature <name> → 基于develop创建功能分支
```

### 表格精炼

**处理前** (20单元格)：

| 原格式        | 新格式 | 转换规则 | 示例 | 例外情况 |
| ------------- | ------ | -------- | ---- | -------- |
| ...5行数据... | ...    | ...      | ...  | ...      |

**处理后** (6单元格)：

| 元素 | 转换规则        | 示例 |
| ---- | --------------- | ---- |
| 标题 | 中文序→数字     | 一→1 |
| 段落 | >150token→3要点 | ...  |

## 5 语义化转换规范

| 元素   | 转换规则      | 示例                              |
| ------ | ------------- | --------------------------------- |
| 工作流 | 使用→符号连接 | `git add → git commit → git push` |
| 参数   | 尖括号表示    | `feature/<name>`                  |
| 状态   | 添加符号前缀  | `✅ 完成功能` `🚧 进行中`           |

## 6 技术细节迁移

具体实现细节移至锚点，保留功能描述
`git config --global pull.rebase true` → `配置变基拉取`

## 7 锚点系统

**锚点标记**：所有精炼内容末尾添加`详见：[文档](#锚点定位)`（例：`[项目概述](#项目概述)`）关联原始文档（使用原文档中的章节标题或资源ID作为锚点，**严禁**嵌入链接）  
**内容范围**：

- 技术实现细节
- 完整代码示例
- 配置参数说明
- 扩展应用场景

## 8 代码块精炼

**处理前** (19行)：

```bash
#!/bin/bash
# ...完整脚本实现...
case $1 in
  "start-feature")
    # 具体命令...
    ;;
  "finish-feature")
    # 具体命令...
    ;;
  "deploy")
    # 具体命令...
    ;;
esac
```

**处理后** (7行)：

```markdown
Git工作流脚本自动化功能：创建分支、合并功能分支、生产部署
```bash:scripts/git-workflow.sh
# 功能分支管理：
start-feature <name> → 基于develop创建功能分支
finish-feature <name> → 合并到develop并删除分支
deploy → 将develop同步到main生产环境
```

### 转换价值分析

1. **信息密度提升**：19行→7行，压缩率63%
2. **可读性优化**：技术实现→业务语义
3. **维护性增强**：
   - 核心逻辑显式表达
   - 详细实现与接口分离
   - 参数要求明确标注
4. **标准化输出**：
   - 统一功能描述格式
   - 统一锚点标记
   - 统一工作流表示法(→)

## 11 对话历史内容提炼概括

**处理要求**：

1. 倒序提取：从最新对话向早期回溯，优先提取关键决策和行动项
2. 关键信息锚定：
   - ✅ 已确认需求
   - ⚠️ 待澄清问题
   - 🔄 循环讨论点
3. 添加对话角色标识符（👤用户, 🤖系统）

**示例**：

- **处理前**（对话历史片段）：
  👤: 建议优化第11节，定义对话历史精炼规则  
  🤖: 当前仅标注'倒序执行'，需添加具体规范  
  👤: 包括角色标识和状态符号，示例需体现倒序处理  

- **处理后**（精炼要点）：
  - 🤖 识别缺口：第11节需规范  
  - 👤 指令：添加角色标识+状态符号  
  - ✅ 优化项：倒序提取关键决策  

---
